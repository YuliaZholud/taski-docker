# Создать образ на основе базового слоя,
# который содержит файлы ОС и интерпретатор Python 3.12.
FROM python:3.12

# Переходим в образе в директорию /app: в ней будем хранить код проекта.
WORKDIR /app
# Все команды ниже будут выполняться в директории /app.

# Устанавливаем системные зависимости, используемые вне приложения (gunicorn).
# Ставим их до копирования файлов проекта.
RUN pip install gunicorn==23.0.0

# Копируем файл зависимостей requirements.txt в рабочую директорию.
COPY requirements.txt .

# Устанавливаем зависимости проекта (Django, DRF и т.д.).
RUN pip install -r requirements.txt --no-cache-dir

# Копируем всё содержимое проекта в образ.
COPY . .

# При старте контейнера запускаем Gunicorn.
# --bind 0.0.0.0:8000 делает сервер доступным извне.
# backend.wsgi — путь к WSGI-приложению Django (замени, если у тебя другое имя пакета).
CMD ["gunicorn", "--bind", "0.0.0.0:8000", "backend.wsgi"]
